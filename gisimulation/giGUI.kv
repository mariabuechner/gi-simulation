#:kivy 1.10.0
#:import np numpy
#:import parser_def simulation.parser_def
#:import test kivy_test

#:set parser_info parser_def.get_arguments_info(parser_def.input_parser())
#:set num_input_size 0.3
#:set line_height 40

# All labels
<Label>:
    size_hint_y: None
    height: line_height
    canvas.before:
        Color:
            rgba: np.divide([88, 88, 88, 50],[255., 255., 255., 100.])
        Rectangle:
            pos: self.pos
            size: self.size

# All text inputs
<TextInput>:
    size_hint_y: None
    height: line_height
    size_hint_x: num_input_size
    multiline: False

# All checkboxes
<CheckBox>:
    size_hint: (None, None)
    height: line_height
    width: line_height
    canvas.before:
        Color:
            rgba: np.divide([88, 88, 88, 50],[255., 255., 255., 100.])
        Rectangle:
            pos: self.pos
            size: self.size


# All BoxLayouts
<BoxLayout>:
    spacing: 1
    padding: 1



# Set rules for custom classes


# gi GUI
<giGUI>:
    # Splitter to seperate general input area (left) and Tabs for results
    # and specific input (right)
    Splitter:
        sizable_from: 'right'
        max_size: root.width*0.9
        min_size: root.width*0.02



        # Right side of splitter
        # Content of 'general input window'
        BoxLayout:
            orientation: 'vertical'
            # Name of window
            Label:
                text: 'General parameters'

            GridLayout:
                cols: 2
                # General input
                BoxLayout:
                    orientation: 'vertical'
                    Label:
                        text: 'General Input'
                    BoxLayout:
                        orientation: 'vertical'
                        BoxLayout:
                            LabelHelp:
                                text: 'Design Energy [keV]'
                                help_message: parser_info['design_energy'][1]
                            FloatInput:
                                id: design_energy
                        BoxLayout:
                            LabelHelp:
                                text: 'Spectrum file location'
                                help_message: parser_info['spectrum_file'][1]
                            TextInput:
                                id: spectrum_file
                        BoxLayout:
                            LabelHelp:
                                text: 'Spectrum range [keV]'
                                help_message: parser_info['spectrum_range'][1]
                            CheckBox:
                                id: spectrum_range_set
                        BoxLayout:
                            BoxLayout:
                                size_hint_x: 0.5
                                Label:
                                    text: 'Min'
                                FloatInput:
                                    id: spectrum_range_min
                                    size_hint_x: 1
                                    disabled: not spectrum_range_set.active
                            BoxLayout:
                                size_hint_x: 0.5
                                Label:
                                    text: 'Max'
                                FloatInput:
                                    id: spectrum_range_max
                                    size_hint_x: 1
                                    disabled: not spectrum_range_set.active
                        BoxLayout:
                            LabelHelp:
                                text: 'Spectrum step size [keV]'
                                help_message:parser_info['spectrum_step'][1]
                            FloatInput:
                                id: spectrum_step
                                text: '1.0'
                                disabled: not spectrum_range_set.active
                                          # And not a spcetum file loaded!!!


                # GI input
                BoxLayout:
                    orientation: 'vertical'
                    Label:
                        text: 'GI Input'
                    BoxLayout:
                        orientation: 'vertical'
                        BoxLayout:
                            LabelHelp:
                                text: 'Geometry'
                                help_message: parser_info['geometry'][1]
                            Spinner:
                                id: geometry
                                text: 'sym'
                                values: ['sym', 'conv', 'inv', 'free']

                BoxLayout:
                    orientation: 'vertical'
                    Label:
                        text: '3. block'
                    BoxLayout:
                        orientation: 'vertical'
                        Button:
                        Button:
                        Button:





    # Left side of splitter
    TabbedPanel:
        do_default_tab: False

        # Geometry
        TabbedPanelItem:
            text: 'Geometry'
            Label:
                text: '1. tab content area'

        # Visibility
        TabbedPanelItem:
            text: 'Visibility'
            Label:
                text: '2. tab content area'

        # CT
        TabbedPanelItem:
            text: 'CT'
            BoxLayout:
                Label:
                    text: 'bla'
                Button:
                    text: 'Raise error and display'
                    on_press: root.check_general_input()